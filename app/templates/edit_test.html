{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Edit Test</h1>
    <form action="{{ url_for('edit_test', test_id=test.id) }}" method="post">
        {% for group in test_structure['formGroups'] %}
            {% for field in group['fields'] %}
                <div class="form-group">
                    <label for="{{ field.name }}">{{ field.label }}</label>
                    {% if field.type == 'textarea' %}
                        <textarea class="form-control" id="{{ field.name }}" name="{{ field.name }}">{{ test_data.get(field.name, '') or '' }}</textarea>
                    {% else %}
                        <input type="{{ field.type }}" class="form-control" id="{{ field.name }}" name="{{ field.name }}" value="{{ test_data.get(field.name, '') or '' }}" {% if field.readonly %}readonly{% endif %}>
                    {% endif %}
                </div>
            {% endfor %}
        {% endfor %}
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>
</div>
{% endblock %}
